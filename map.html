<!doctype html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<!--<link href="static/mui/css/mui.min.css" rel="stylesheet" />
		<link rel="stylesheet" type="text/css" href="static/css/common.css"/>
		<link rel="stylesheet" type="text/css" href="static/css/app.css"/>-->
		<style type="text/css">
			body, html{width: 100%;height: 100%;overflow: hidden;margin:0;font-family:"微软雅黑";}
			#map {
				width:100%;
				height: 300px;
			}
		</style>
		<script type="text/javascript" src="https://api.map.baidu.com/api?v=2.0&ak=wqB7npvF7DsDGlFG2oYhih93K5iEqsou"></script>
	</head>

	<body>
		
		<!--<header class="mui-bar mui-bar-nav">
		    <div class="title">
		    	<span class="mui-action-back mui-pull-left"></span>
			    <strong>返回</strong>
			    <h1 class="mui-title">事故地点定位</h1>
		    </div>   
		</header>-->
		
		<div id="map">
			
		</div>
		
		<hr />
		<input type="text" value=""/>
	    <p id="demo">地址：</p>
		
		<script type="text/javascript">
			// 获取当前地点的经纬度
			if (navigator.geolocation){
		    	var position = navigator.geolocation.getCurrentPosition();
		    	alert(position)
		    }else{
			  	alert('定位失败')
			}
  
			var x=document.getElementById("demo");
			
			function showPosition(position){
				// GPS 坐标
				var x = position.coords.latitude;
			    var y = position.coords.longitude;
			    x.innerHTML = '经度:'+ x + '纬度:'+ y
			    var ggPoint = new BMap.Point(x,y);
			    
			   	// 地图初始化
			   	var bm = new BMap.Map("map");    // 创建Map实例
				bm.centerAndZoom(new BMap.Point(x,y), 14);  // 初始化地图,设置中心点坐标和地图级别	  
				bm.setCurrentCity("重庆市");          // 设置地图显示的城市 此项是必须设置的
				
				//添加gps marker和label
			    var markergg = new BMap.Marker(ggPoint);
			    bm.addOverlay(markergg); //添加GPS marker
			    var labelgg = new BMap.Label("未转换的GPS坐标（错误）",{offset:new BMap.Size(20,-10)});
			    markergg.setLabel(labelgg); //添加GPS label
			
			    //坐标转换完之后的回调函数
			    translateCallback = function (data){
			      if(data.status === 0) {
			        var marker = new BMap.Marker(data.points[0]);
			        bm.addOverlay(marker);
			        var label = new BMap.Label("转换后的百度坐标（正确）",{offset:new BMap.Size(20,-10)});
			        marker.setLabel(label); //添加百度label
			        bm.setCenter(data.points[0]);
			      }
			    }
			
			    setTimeout(function(){
			        var convertor = new BMap.Convertor();
			        var pointArr = [];
			        pointArr.push(ggPoint);
			        convertor.translate(pointArr, 1, 5, translateCallback)
			    }, 1000);
			}

	








	
		</script>
	</body>

</html>